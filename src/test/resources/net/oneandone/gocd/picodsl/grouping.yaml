format_version: 3

pipelines:
  p1:
    group: dev
    label_template: ${material1}
    lock_behavior: unlockWhenFinished
    materials:
      material1:
        package: material1
    template: template1
  p2:
    group: dev
    label_template: ${p1}
    lock_behavior: unlockWhenFinished
    materials:
      p1:
        pipeline: p1
        stage: stage1
    template: template2
  qa-p1:
    group: qa
    label_template: ${p2}
    lock_behavior: unlockWhenFinished
    materials:
      p2:
        pipeline: p2
        stage: stage2
    template: template1
  qa-p2:
    group: qa
    label_template: ${qa-p1}
    lock_behavior: unlockWhenFinished
    materials:
      qa-p1:
        pipeline: qa-p1
        stage: stage1
    template: template2
